# ===========================================
# Driver Operations Platform - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# -------------------------------------------
# Database (Neon PostgreSQL)
# -------------------------------------------
# Get from: Neon Console > Connection Details > Select "Pooled"
DATABASE_URL=postgresql://user:password@ep-xxxxx-pooler.us-east-1.aws.neon.tech/driver?sslmode=require

# -------------------------------------------
# Better Auth
# -------------------------------------------
# BETTER_AUTH_SECRET: Generate with: openssl rand -base64 32
# BETTER_AUTH_URL: Only needed for local dev. Vercel auto-provides VERCEL_URL in production.
BETTER_AUTH_SECRET=generate-with-openssl-rand-base64-32
BETTER_AUTH_URL=http://localhost:5173

# Additional trusted origins (comma/newline/semicolon separated).
# - Production: entries must be explicit origins (no wildcards), otherwise auth startup fails.
# - Development/preview: invalid entries are ignored with warnings.
# Example: https://drive.example.com,https://admin.example.com
BETTER_AUTH_TRUSTED_ORIGINS=

# Development-only trusted origins (wildcards allowed).
# Example: http://192.168.*
BETTER_AUTH_DEV_TRUSTED_ORIGINS=

# Signup abuse hardening
# Production defaults to allowlist mode if this is unset.
# - allowlist: only approved emails can sign up
# - open: anyone can sign up (not recommended for production)
BETTER_AUTH_SIGNUP_POLICY=allowlist

# Comma-separated allowlist used when BETTER_AUTH_SIGNUP_POLICY=allowlist
# Example: manager@company.com,driver.one@company.com
BETTER_AUTH_SIGNUP_ALLOWLIST=

# Optional dev-only shared invite code. Ignored when NODE_ENV=production.
BETTER_AUTH_INVITE_CODE=

# -------------------------------------------
# Firebase Cloud Messaging (Push Notifications)
# -------------------------------------------
# Get from: Firebase Console > Project Settings > Service Accounts > Generate new private key
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_KEY_HERE\n-----END PRIVATE KEY-----\n"

# -------------------------------------------
# Observability (Axiom)
# -------------------------------------------
# Get from: Axiom Console > Settings > API Tokens
# AXIOM_DATASET defaults to 'driver-ops' if omitted
# Leave empty in dev (logs pretty-print to console instead)
AXIOM_TOKEN=
AXIOM_DATASET=driver-ops

# -------------------------------------------
# Email (Resend)
# -------------------------------------------
# Get API key from: Resend Dashboard > API Keys
# Required for password reset emails
RESEND_API_KEY=re_xxxxxxxxxxxx

# From address for transactional emails
# Must match a verified domain in Resend
EMAIL_FROM=Drive <noreply@yourdomain.com>

# -------------------------------------------
# Development / Testing
# -------------------------------------------
# Credentials for automated testing and dev-login skill
TEST_USER_EMAIL=test@driver-ops.local
TEST_USER_PASSWORD=test1234

# -------------------------------------------
# Vercel Cron Jobs
# -------------------------------------------
# Secret to authenticate cron job requests
# Generate with: openssl rand -base64 32
# Set in Vercel dashboard as CRON_SECRET
CRON_SECRET=generate-with-openssl-rand-base64-32

# -------------------------------------------
# Mobile Build (Capacitor)
# -------------------------------------------
# Production URL for mobile app to load via Capacitor server config
# Only needed when building mobile app for production
# Example: https://your-app.vercel.app
CAP_SERVER_URL=

# -------------------------------------------
# Android App Distribution
# -------------------------------------------
# Version checking for self-hosted APK distribution
# APP_MIN_VERSION: Minimum versionCode required (blocks older apps)
# APP_CURRENT_VERSION: Latest versionCode available
# APP_DOWNLOAD_URL: URL to download latest APK (GitHub Releases)
APP_MIN_VERSION=1
APP_CURRENT_VERSION=1
APP_DOWNLOAD_URL=https://github.com/orro3790/drive/releases/latest/download/app-release.apk

# -------------------------------------------
# Production (Vercel)
# -------------------------------------------
# Set DATABASE_URL, BETTER_AUTH_SECRET, CRON_SECRET, and Firebase vars in Vercel dashboard.
# BETTER_AUTH_URL is auto-detected from VERCEL_URL â€” no override needed.
