@import './lib/styles/print.css';

/*═══════════════════════════════════════════════════════════════════════════
  FONT FACES — Geist (default) & NanumSquareNeo (Korean)
  ═══════════════════════════════════════════════════════════════════════════*/

/* Geist — Default font family */
@font-face {
	font-family: 'Geist';
	src: url('/fonts/Geist-Regular.woff2') format('woff2');
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'Geist';
	src: url('/fonts/Geist-Medium.woff2') format('woff2');
	font-weight: 500;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'Geist';
	src: url('/fonts/Geist-Bold.woff2') format('woff2');
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'GeistMono';
	src: url('/fonts/GeistMono-Regular.woff2') format('woff2');
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'GeistMono';
	src: url('/fonts/GeistMono-Medium.woff2') format('woff2');
	font-weight: 500;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'GeistMono';
	src: url('/fonts/GeistMono-Bold.woff2') format('woff2');
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

/* NanumSquareNeo — Korean font family (loaded only for :lang(ko)) */
@font-face {
	font-family: 'NanumSquareNeo';
	src:
		url('/fonts/NanumSquareNeoTTF-bRg.woff2') format('woff2'),
		url('/fonts/NanumSquareNeoTTF-bRg.woff') format('woff');
	font-weight: 400;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'NanumSquareNeo';
	src:
		url('/fonts/NanumSquareNeoTTF-cBd.woff2') format('woff2'),
		url('/fonts/NanumSquareNeoTTF-cBd.woff') format('woff');
	font-weight: 500;
	font-style: normal;
	font-display: swap;
}

@font-face {
	font-family: 'NanumSquareNeo';
	src:
		url('/fonts/NanumSquareNeoTTF-dEb.woff2') format('woff2'),
		url('/fonts/NanumSquareNeoTTF-dEb.woff') format('woff');
	font-weight: 700;
	font-style: normal;
	font-display: swap;
}

/* Korean language typography override */
:lang(ko) {
	--font-family-base: 'NanumSquareNeo', 'Geist', system-ui, -apple-system, sans-serif;
}

:root {
	/*═══════════════════════════════════════════════════════════════════════════
	  TYPOGRAPHY
	  ═══════════════════════════════════════════════════════════════════════════*/

	--font-family-base: 'Geist', system-ui, -apple-system, sans-serif;
	--font-family-mono: 'GeistMono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;

	/* Font Weights */
	--font-weight-medium: 500; /* section headers, modal headers, titles, notice banners */
	--font-weight-bold: 700; /* page titles (--font-size-xl), low-visibility special chars */

	/* Font Sizes — Major Second Scale (root html is 14px) */
	--font-size-xs: 0.75rem; /* ~10px — used very sparingly; pair with font-size-bold */
	--font-size-sm: 0.889rem; /* ~12px — pills, badges, labels; pair with --letter-spacing-sm */
	--font-size-base: 1rem; /* 14px — body text */
	--font-size-md: 1.26rem; /* ~18px — subsection headers */
	--font-size-lg: 1.602rem; /* ~22px — section headers */
	--font-size-xl: 2.027rem; /* ~28px — page titles */

	--letter-spacing-sm: 0.02rem; /* always pair with --font-size-sm */

	--line-height-none: 1;
	--line-height-base: 1.5;

	/*═══════════════════════════════════════════════════════════════════════════
	  SPACING SCALE
	  ═══════════════════════════════════════════════════════════════════════════*/

	--spacing-0: 0;
	--spacing-1: 0.25rem; /* 3.5px mostly used for tight gap between list items, badge padding, chip padding */
	--spacing-1-5: 0.375rem; /* 5.25px; vertical padding, used to achieve compact elements with --spacing-2 left/right */
	--spacing-2: 0.5rem; /* 7px; horizontal padding, used to achieve compact elements with --spacing-1-5 top/bottom */
	--spacing-3: 1rem; /* 14px */
	--spacing-4: 1.5rem; /* 21px */
	--spacing-5: 2rem; /* 28px */
	--spacing-6: 2.5rem; /* 35px */
	--spacing-7: 3rem; /* 42px */
	--spacing-8: 4rem; /* 56px — for outer gutters, page-level spacing */
	/*

	/*═══════════════════════════════════════════════════════════════════════════
	  RESPONSIVE BREAKPOINTS (Reference)
	  
	  @media queries — for viewport-level layout (page chrome, sidebars):
	    Mobile:   max-width: 767px   (phones, below tablet)
	    Tablet:   min-width: 768px   (tablets and up)
	    Desktop:  min-width: 1024px  (laptops and up)
	    Wide:     min-width: 1280px  (large displays)
	  
	  @container queries — for component-level layout (cards, tables, panels):
	    Use when a component should respond to its own container size, not viewport.
	    Add `container-type: inline-size` to the container element, then use
	    `@container (max-width: Npx)` to style children based on available space.
	  
	  Note: Use 767px for max-width to avoid overlap with 768px min-width.
	  ═══════════════════════════════════════════════════════════════════════════*/

	/*═══════════════════════════════════════════════════════════════════════════
	  BORDERS & SHADOWS
	  ═══════════════════════════════════════════════════════════════════════════*/

	--radius-sm: 0.125rem; /* 1.75px */
	--radius-base: 0.25rem; /* 3.5px */
	--radius-lg: 0.5rem; /* 7px */
	--radius-full: 9999px;

	--border-width-thin: 1px;
	--border-width-medium: 2px;

	--shadow-base: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
	--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);

	/*═══════════════════════════════════════════════════════════════════════════
	  COLOR SYSTEM — READ BEFORE USING
	  ─────────────────────────────────────────────────────────────────────────────
	  Categories:
	    1. SURFACE       — static backgrounds (canvas, cards, panels)
	    2. INTERACTIVE   — elements that respond to user input
	    3. TEXT          — text color hierarchy
	    4. STATUS        — feedback states (error, success, warning, info)
	    5. BORDER/FORM   — structural elements (borders, dividers, inputs)

	  Quick reference:
	    ┌─────────────────────────────────────────────────────────────────────────┐
	    │ NEED                          │ USE                                     │
	    ├─────────────────────────────────────────────────────────────────────────┤
	    │ Page/app background           │ --surface-inset                        │
	    │ Card/panel background         │ --surface-primary                       │
	    │ Recessed/inset background     │ --surface-inset                         │
	    │ Hover state on any element    │ --interactive-hover                     │
	    │ Button/link resting state     │ --interactive-normal                    │
	    │ Accent color (primary action) │ --interactive-accent                    │
	    │ Accent hover state            │ --interactive-accent-hover              │
	    │ Body text                     │ --text-normal                           │
	    │ Secondary/helper text         │ --text-muted                            │
	    │ Disabled/placeholder text     │ --text-faint                            │
	    │ Link/accent text              │ --text-accent                           │
	    │ Error message text            │ --status-error                          │
	    │ Success message text          │ --status-success                        │
	    │ Warning message text          │ --status-warning                        │
	    │ Error button/badge background │ --status-error (bg) + --text-on-accent  │
	    │ Form input background         │ --form-background                       │
	    │ Border color                  │ --border-primary                        │
	    │ Divider/subtle border         │ --border-muted                          │
	    │ Modal overlay                 │ --overlay-backdrop                      │
	    └─────────────────────────────────────────────────────────────────────────┘
	  ═══════════════════════════════════════════════════════════════════════════*/

	/* System colors (raw) */
	--color-black: #000000;
	--color-white: #ffffff;

	/*───────────────────────────────────────────────────────────────────────────
	  1. SURFACE — Static backgrounds where content lives
	     Use for: page backgrounds, cards, panels, sidebars
	     Do NOT use for: hover states (use --interactive-hover instead)
	  ───────────────────────────────────────────────────────────────────────────*/

	--surface-primary: #202020; /* cards, modals, elevated panels */
	--surface-secondary: #1a1a1a; /* alternate/contrast panels */
	--surface-inset: #161616; /* recessed areas, page canvas */

	/*───────────────────────────────────────────────────────────────────────────
	  2. INTERACTIVE — Elements that respond to user input
	     Use for: buttons, links, clickable items, toggle controls
	  ───────────────────────────────────────────────────────────────────────────*/

	--interactive-normal: #2a2a2a; /* resting state of interactive elements */
	--interactive-hover: #303030; /* hover state for ALL interactive elements */
	--interactive-accent: #7f6df2; /* primary action color (buttons, links) */
	--interactive-accent-hover: #8875ff; /* hover for accent elements */
	--interactive-accent-muted: #483699; /* subdued accent (selected states, badges) */
	--interactive-accent-rgb: 127, 109, 242; /* for rgba() transparency effects */

	/*───────────────────────────────────────────────────────────────────────────
	  3. TEXT — Typography color hierarchy
	     Use for: text content only (not backgrounds or borders)
	  ───────────────────────────────────────────────────────────────────────────*/

	--text-normal: #dcddde; /* primary body text */
	--text-muted: #999; /* secondary/helper text */
	--text-faint: #666; /* disabled text, placeholders */
	--text-accent: #7f6df2; /* links, emphasized text */
	--text-accent-hover: #8875ff; /* link hover */
	--text-on-accent: #ffffff; /* text on accent-colored backgrounds */
	--text-highlight-bg: rgba(236, 125, 16, 0.4); /* text highlight/selection bg */

	/*───────────────────────────────────────────────────────────────────────────
	  4. STATUS — Feedback states for user communication
	     Use for: alerts, badges, toasts, validation messages, status indicators
	     Applies to both text AND backgrounds (see status-*-background for subtle bg)
	  ───────────────────────────────────────────────────────────────────────────*/

	--status-error: #ff4141;
	--status-error-hover: #cc3636;
	--status-error-background: #3d0000; /* subtle error bg (dark theme) */
	--status-error-background-hover: #470000;

	--status-success: #30b04a;
	--status-success-hover: #279240;
	--status-success-background: rgba(48, 176, 74, 0.15); /* subtle success bg */

	--status-warning: #ec7d10;
	--status-warning-hover: #c96a0e;
	--status-warning-background: rgba(236, 125, 16, 0.15); /* subtle warning bg */

	--status-info: #3b82f6; /* Changed from #7f6df2 to match typical info blue */
	--status-info-background: rgba(59, 130, 246, 0.15); /* subtle info bg */

	/*───────────────────────────────────────────────────────────────────────────
	  5. BORDERS, FORMS & OVERLAYS — Structural elements
	───────────────────────────────────────────────────────────────────────────*/

	/* Borders */
	--border-primary: #333; /* standard borders */
	--border-muted: #2a2a2a; /* subtle dividers */
	--border-focus: var(--interactive-accent); /* focus ring color */

	/* Form inputs */
	--form-background: rgba(0, 0, 0, 0.3);
	--form-background-hover: rgba(0, 0, 0, 0.22);

	/* Overlays */
	--overlay-backdrop: rgba(0, 0, 0, 0.6); /* modal/drawer backdrop */

	/*═══════════════════════════════════════════════════════════════════════════
	  Z-INDEX SCALE
	  ═══════════════════════════════════════════════════════════════════════════*/

	--z-10: 10;
	--z-20: 20;
	--z-30: 30;
	--z-50: 50;
	--z-60: 60;
	--z-70: 70;

	/* Semantic z-indexes */
	--z-dropdown: var(--z-10);
	--z-sticky: var(--z-20);
	--z-drawer: var(--z-30);
	--z-sidebar: var(--z-30);
	--z-modal: var(--z-50);
	--z-popover: var(--z-60);
	--z-toast: var(--z-70);

	/*═══════════════════════════════════════════════════════════════════════════
	  TRANSITIONS
	  ═══════════════════════════════════════════════════════════════════════════*/

	--transition-duration-100: 100ms;
	--transition-duration-200: 200ms;

	--transition-ease: cubic-bezier(0.4, 0, 0.2, 1);

	--transition-all: all 100ms var(--transition-ease);

	/*═══════════════════════════════════════════════════════════════════════════
	  COMPONENT-SPECIFIC TOKENS
	  ═══════════════════════════════════════════════════════════════════════════*/

	--tree-indent-width: var(--spacing-3);
	--tree-node-height: var(--spacing-5);
	--cover-page-min-height: 600px;
}

/* Base Styles */
*,
*::before,
*::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

/* Reset browser defaults to prevent component style conflicts */
button {
	font-family: inherit;
	font-size: inherit;
	font-weight: inherit;
	line-height: inherit;
	color: inherit;
	background: none;
	border: none;
	padding: 0;
	margin: 0;
	cursor: pointer;
}

h1,
h2,
h3,
h4,
h5,
h6 {
	font-family: inherit;
	font-size: inherit;
	font-weight: inherit;
	line-height: inherit;
	margin: 0;
}

p {
	margin: 0;
}

ul,
ol {
	list-style: none;
	margin: 0;
	padding: 0;
}

html {
	height: 100%;
	overflow-x: hidden; /* Prevent horizontal scroll from animated assets */
	font-size: 16px; /* sets the root font size for rem calculations */
	font-weight: 400;
}

body {
	font-family: var(--font-family-base);
	line-height: var(--line-height-base);
	color: var(--text-normal);
	background-color: var(--surface-secondary);
	overflow-x: hidden; /* Prevent horizontal scroll from animated assets */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	min-height: 100vh;
}

/* Links */
a {
	color: var(--interactive-accent);
	text-decoration: none;
	font-weight: var(--font-weight-medium);
	transition:
		color var(--transition-duration-200) var(--transition-ease),
		text-decoration var(--transition-duration-200) var(--transition-ease);
}

a:hover {
	color: var(--interactive-accent-hover);
	text-decoration: underline;
}

/* Form Elements */
input,
textarea,
select {
	font-family: var(--font-family-base);
	font-size: var(--font-size-base);
	color: var(--text-normal);
	border-radius: var(--radius-base);
	padding: var(--spacing-2) var(--spacing-3);
	transition: var(--transition-colors), var(--transition-shadow);
}

input:hover,
textarea:hover,
select:hover {
	background-color: var(--background-modifier-form-hover);
	border-color: var(--text-muted);
}

input:focus,
textarea:focus,
select:focus {
	outline: none;
}

/* Selection (ex: EditModal text select)
   Neutral selection background using theme tokens (no color tint) */
::selection {
	background-color: var(--interactive-hover);
	color: inherit;
}
::-moz-selection {
	background-color: var(--interactive-hover);
	color: inherit;
}
input::selection,
textarea::selection,
[contenteditable='true']::selection {
	background-color: var(--interactive-hover);
	color: inherit;
}

/* Focus Outline */
:focus-visible {
	outline: none;
	box-shadow: inset 0 0 0 var(--border-width-thin) var(--interactive-accent);
	border-radius: var(--radius-base);
	transition: none; /* Prevent choppy transition animation */
}

/* High contrast/forced-colors accessibility fallback */
@media (forced-colors: active) {
	:focus-visible {
		outline: var(--border-width-thin) solid CanvasText;
		outline-offset: 1px;
		box-shadow: none;
	}
}

/* InlineEditor: suppress inner ring on the actual input/textarea and rely on its container border */
.editable-input:focus-visible {
	box-shadow: none;
}

/* Scrollbar */
::-webkit-scrollbar {
	width: var(--spacing-2);
	height: var(--spacing-2);
}

::-webkit-scrollbar-track {
	background-color: var(--surface-secondary);
}

::-webkit-scrollbar-thumb {
	background-color: var(--text-faint);
	border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
	background-color: var(--text-muted);
}

::-webkit-scrollbar-corner {
	background-color: var(--surface-secondary);
}

/* Thin scrollbars on mobile — visual position indicators, not click targets */
@media (max-width: 900px) {
	::-webkit-scrollbar {
		width: 3px;
		height: 3px;
	}

	::-webkit-scrollbar-track {
		background-color: transparent;
	}
}

html[data-theme='dark'] {
	color-scheme: dark;
}

/*═══════════════════════════════════════════════════════════════════════════
  LIGHT THEME OVERRIDES
  Only override values that differ from dark theme; inherits structure above.
  ═══════════════════════════════════════════════════════════════════════════*/

html[data-theme='light'] {
	color-scheme: light;

	/* Surface — larger steps for visible hierarchy */
	--surface-primary: #ffffff;
	--surface-secondary: #f3f5f8; /* Visible difference from white */
	--surface-inset: #e8ebf0; /* Clearly darker for page canvas */

	/* Interactive — darker than surfaces for clear distinction */
	--interactive-normal: #e3e7ec;
	--interactive-hover: #d9dee5;
	--interactive-accent: #6d5bd0; /* Darker than dark mode (#7f6df2) for contrast */
	--interactive-accent-hover: #5b4abf;
	--interactive-accent-muted: #e0dcfc;
	--interactive-accent-rgb: 109, 91, 208;

	/* Text — WCAG AA compliant on all surfaces */
	--text-normal: #2c2e33; /* Softer charcoal, less harsh than pure black */
	--text-muted: #5c6b7f; /* Cool gray for secondary text */
	--text-faint: #647488; /* Darkened for WCAG AA (~4.8:1 on white) */
	--text-accent: #6d5bd0;
	--text-accent-hover: #5b4abf;

	/* Status */
	--status-error: #dc2626; /* Red-600 */
	--status-error-hover: #b91c1c; /* Red-700 */
	--status-error-background: rgba(220, 38, 38, 0.08);
	--status-error-background-hover: rgba(220, 38, 38, 0.12);

	--status-success: #16a34a; /* Green-600 */
	--status-success-hover: #15803d; /* Green-700 */
	--status-success-background: rgba(22, 163, 74, 0.08);

	--status-warning: #ea580c; /* Orange-600 */
	--status-warning-hover: #c2410c; /* Orange-700 */
	--status-warning-background: rgba(234, 88, 12, 0.08);

	--status-info: #2563eb; /* Blue-600 */
	--status-info-background: rgba(37, 99, 235, 0.08);

	/* Status borders for callouts/toasts */
	--status-success-border: rgba(22, 163, 74, 0.2);
	--status-error-border: rgba(220, 38, 38, 0.2);
	--status-warning-border: rgba(234, 88, 12, 0.2);

	/* Borders & Forms — visible on all surface backgrounds */
	--border-primary: #d5dbe3; /* Visible on white and secondary */
	--border-muted: #dfe4eb; /* Distinct from surface-inset (#e8ebf0) */
	--form-background: #ffffff;
	--form-background-hover: #fcfcfc;
	--overlay-backdrop: rgba(0, 0, 0, 0.4);
}

/* Hide number input spinners globally */
input[type='number'] {
	-moz-appearance: textfield;
	appearance: textfield;
}

input[type='number']::-webkit-outer-spin-button,
input[type='number']::-webkit-inner-spin-button {
	-webkit-appearance: none;
	margin: 0;
}

/* Disable the "not-allowed" cursor on disabled elements globally */
input:disabled,
textarea:disabled,
select:disabled,
button:disabled,
[disabled],
.disabled {
	cursor: default !important;
}

/* Selection utilities (cross-browser) */
.no-select {
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.no-select :is(input, textarea, select, [contenteditable='true']),
.selectable {
	-webkit-user-select: text;
	-moz-user-select: text;
	-ms-user-select: text;
	user-select: text;
}

/* Page surface scaffolding */
.page-surface {
	width: 100%;
	height: 100%;
	display: flex;
	flex-direction: column;
	min-height: 0;
	border-radius: inherit;
	background: transparent;
}

.page-stage {
	flex: 1;
	display: flex;
	flex-direction: column;
	min-height: 0;
	padding: var(--spacing-3) 0 var(--spacing-3) var(--spacing-3);
	gap: var(--spacing-3);
	background: var(--surface-inset);
	border-radius: inherit;
	overflow: hidden;
}

@media (max-width: 767px) {
	.page-stage {
		padding: var(--spacing-3) 0 var(--spacing-3) var(--spacing-3);
		gap: var(--spacing-3);
		background: var(--surface-primary);
	}

	.page-content {
		padding-right: 0;
	}
}

.page-layout {
	flex: 1;
	min-height: 0;
	display: flex;
	gap: var(--spacing-3);
}

.page-card {
	background: var(--surface-primary);
	border-radius: var(--radius-lg);
	box-shadow: var(--shadow-base);
	display: flex;
	flex-direction: column;
	min-height: 0;
}

.page-sidebar {
	width: 320px;
	min-width: 320px;
	overflow: auto;
}

@media (max-width: 1023px) {
	.page-sidebar {
		width: 280px;
		min-width: 280px;
	}
}

@media (max-width: 767px) {
	.page-sidebar {
		width: 100%;
		min-width: auto;
	}
}

.page-content {
	flex: 1;
	min-height: 0;
	overflow: auto;
	display: flex;
	justify-content: center;
	align-items: flex-start;
	padding-right: var(--spacing-3);
}

.page-stack {
	position: relative;
	flex: 1;
	min-height: 0;
	overflow: hidden;
}

.page-stack [data-pane] {
	position: absolute;
	inset: 0;
	display: flex;
	flex-direction: column;
	min-height: 0;
	overflow: auto;
	transition: transform var(--transition-duration-200) var(--transition-ease);
}

.page-stack [data-pane='detail'] {
	z-index: 1;
}

.page-stack[data-view='list'] [data-pane='list'] {
	transform: translateX(0);
}

.page-stack[data-view='list'] [data-pane='detail'] {
	transform: translateX(100%);
}

.page-stack[data-view='details'] [data-pane='list'] {
	transform: translateX(-100%);
}

.page-stack[data-view='details'] [data-pane='detail'] {
	transform: translateX(0);
}
